<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Transition</title>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            overflow: hidden;
        }

        .layer1 {
            background-image: url("1.jpg");
            height: 100%;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }

        .layer2 {
            width: 1200px;
            height: 1200px;
            border-radius: 50%;
            border-width: 1px;
            border-style: solid;
            border-color: #ffffff;
            position: absolute;
            z-index: 1;
            top: -42%;
            left: 5%;
            right: 5%;
            margin: auto;
            background-image: url("1.jpg");
            background-position: center;
            background-repeat: no-repeat;
            background-size: 115%;
        }

        .layer2::before {
            content: "";
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 50%;
        }

        .layer3 {
            width: 45%;
            height: 95%;
            border-radius: 50%;
            border-width: 1px;
            border-style: solid;
            border-color: #ffffff;
            position: absolute;
            z-index: 1;
            top: 2%;
            left: 5%;
            right: 5%;
            margin: auto;
            background-image: url("1.jpg");
            background-position: center;
            background-repeat: no-repeat;
            background-size: 235%;
        }

        .itsabutton {
            position: absolute;
            z-index: 1;
            bottom: 5%;
            right: 5%;
            background-color: #3498db;
            color: #ffffff;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            cursor: pointer;
        }

        @keyframes rotateZoomLayer1 {
            0% {
                transform: rotate(0deg) scale(9);
            }
            100% {
                transform: rotate(360deg) scale(1);
            }
        }

        .rotate-zoom-layer-1 {
            animation: rotateZoomLayer1 2s forwards;
        }

        @keyframes rotateZoomLayer2 {
            0% {
                transform: rotate(0deg) scale(1);
            }
            100% {
                transform: rotate(360deg) scale(1);
            }
        }

        .rotate-zoom-layer-2 {
            animation: rotateZoomLayer2 2s forwards;
        }

        @keyframes rotateZoomLayer3 {
            0% {
                transform: rotate(0deg) scale(1);
            }
            100% {
                transform: rotate(360deg) scale(1);
            }
        }

        .rotate-zoom-layer-3 {
            animation: rotateZoomLayer3 2s forwards;
        }
    </style>
</head>
<body>
    <div class="layer1"></div>
    <div class="layer2"></div>
    <div class="layer3"></div>
    <button type="button" class="itsabutton" onclick="rotateAndZoom()">Klik Aquww</button>
    <script>
        let clickCounter = 0;

        function rotateAndZoom() {
            const layer1 = document.querySelector('.layer1');
            const layer2 = document.querySelector('.layer2');
            const layer3 = document.querySelector('.layer3');

            layer1.classList.remove('rotate-zoom-layer-1');
            layer2.classList.remove('rotate-zoom-layer-2');
            layer3.classList.remove('rotate-zoom-layer-3');

            clickCounter++;
            // const backgroundImage = clickCounter % 2 === 0 ? '1.jpg' : '2.jpg';
            const currentImageNumber = clickCounter % 4;
            const backgroundImage = `${currentImageNumber + 1}.jpg`;
            layer1.style.backgroundImage = `url("${backgroundImage}")`;
            layer2.style.backgroundImage = `url("${backgroundImage}")`;
            layer3.style.backgroundImage = `url("${backgroundImage}")`;

            // Rotate layer3 first
            layer3.classList.add('rotate-zoom-layer-3');

            // After a delay, rotate layer2
            setTimeout(() => {
                layer2.classList.add('rotate-zoom-layer-2');
            }, 200);

            // After a delay, rotate layer1
            setTimeout(() => {
                layer1.classList.add('rotate-zoom-layer-1');
            }, 200);

            // Listen for the end of the animation on layer3
            layer3.addEventListener('animationend', function() {
                layer3.classList.remove('rotate-zoom-layer-3');
            }, { once: true });

            // Listen for the end of the animation on layer2
            layer2.addEventListener('animationend', function() {
                layer2.classList.remove('rotate-zoom-layer-2');
            }, { once: true });

            // Listen for the end of the animation on layer
            layer1.addEventListener('animationend', function() {
                layer1.classList.remove('rotate-zoom-layer-1');
            }, { once: true });
        }
    </script>
</body>
</html>